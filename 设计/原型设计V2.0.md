# 原型说明 V2.0（按页面/交互/校验/状态提示）

> 本文档基于 V1.0 原型设计进行扩展，新增互动增强、内容增强、数据分析、SEO配置等页面与交互规范。
>
> **定位说明**：本系统为管理员个人博客，仅管理员可发表文章，普通用户为访客/读者角色。

---

## 1. 全局原型约定（V2.0扩展）

### 1.1 全局快捷操作

* 文章卡片/详情页新增：
  * **点赞按钮**：心形图标 + 数量（已点赞状态高亮）
  * **收藏按钮**：星形图标 + 数量（已收藏状态高亮）
  * **分享按钮**：复制链接/分享到社交平台

### 1.2 登录状态下用户菜单扩展

* 头像下拉菜单新增：
  * `我的收藏` - 进入收藏夹管理页

---

## 2. 前台新增页面

### 2.1 收藏夹页（用户）

#### 页面入口

* 顶部栏用户菜单 > "我的收藏"
* 用户主页 > "收藏"Tab（公开收藏夹）

#### 页面结构

* 左侧：收藏夹列表
  * 默认收藏夹（系统创建，不可删除）
  * 自定义收藏夹列表
  * 新建收藏夹按钮（+）
* 右侧：当前收藏夹内文章列表

#### 收藏夹列表项

* 收藏夹名称
* 文章数量
* 可见性图标（公开/私密）
* 当前选中高亮

#### 收藏夹操作

* **新建**：
  * 点击"+"按钮弹出弹窗
  * 表单：名称（必填）、描述（可选）、是否公开（开关）
  * 校验：名称不能为空、名称不能重复

* **编辑**：
  * 收藏夹名称右侧齿轮图标
  * 弹窗修改名称、描述、公开状态
  * 默认收藏夹仅可修改公开状态

* **删除**：
  * 确认弹窗："删除后收藏夹内文章将移动到默认收藏夹"
  * 默认收藏夹不可删除

#### 文章列表

* 卡片形式：标题、摘要、收藏时间、作者
* 操作：
  * `移动到其他收藏夹`（下拉选择）
  * `取消收藏`（确认提示）
  * `阅读文章`

#### 状态

* 空收藏夹："还没有收藏任何文章"
* 加载中：骨架屏

---

### 2.2 文章系列详情页

#### 页面结构

* 顶部：系列封面（大图Banner）
* 系列信息区：
  * 标题
  * 描述
  * 状态标签：连载中 / 已完结
  * 统计：共N篇文章、总阅读量
* 目录区：系列内文章列表
  * 序号
  * 文章标题（链接）
  * 发布时间
  * 阅读量

#### 交互

* 点击文章标题进入详情页
* 系列内文章按管理员设定顺序展示

#### 权限

* 遵循系列可见性设置
* 系列内仅展示用户有权限查看的文章

---

### 2.3 热门排行页

#### 页面结构

* 顶部：Tab切换
  * `日榜` `周榜` `月榜` `总榜`
* 排行列表：
  * 排名序号（1-3名特殊样式：金银铜）
  * 文章封面（缩略图）
  * 文章标题
  * 作者头像+昵称
  * 统计：阅读量、点赞数、评论数

#### 交互

* 点击文章进入详情
* Tab切换刷新列表

#### 状态

* 加载中：骨架屏
* 无数据："暂无排行数据"

---

### 2.4 友情链接页

#### 页面结构

* 按分类分组展示
* 每个分类标题下方为链接卡片网格

#### 链接卡片

* Logo图片
* 站点名称
* 描述（一行，超出省略）

#### 交互

* 点击卡片新窗口打开链接URL
* Hover效果：卡片轻微放大

---

## 3. 后台管理新增页面

### 3.1 后台菜单扩展

左侧菜单新增：

* **内容管理**（原有扩展）
  * 系列管理（新增）
* **数据分析**（新增）
  * 访问统计
  * 热门排行配置
* **SEO设置**（新增）
  * Sitemap配置
  * 友链管理

---

### 3.2 系列管理页（Admin）

#### 列表页

* 筛选栏：
  * 标题关键字
  * 状态：全部/连载中/已完结
  * 可见性筛选

* 表格列：
  * 封面（缩略图）
  * 标题
  * 文章数
  * 状态
  * 可见性
  * 更新时间
  * 操作

* 操作按钮：
  * `编辑`
  * `管理文章`
  * `删除`

#### 新建/编辑系列弹窗

* 表单字段：
  * 标题（必填）
  * 描述（多行文本）
  * 封面（上传图片）
  * 状态：连载中 / 已完结
  * 可见性：PUBLIC / LOGIN_ONLY / PRIVATE 等

* 校验：
  * 标题不能为空
  * 封面建议但非必填

#### 管理文章页面（抽屉/弹窗）

* 系列内文章列表（可拖拽排序）
* 添加文章：
  * 搜索/选择已有文章
  * 已有系列的文章会提示"将从原系列移除"
* 移除文章：点击删除图标，确认后移除
* 保存排序按钮

---

### 3.3 文章编辑器扩展

#### 侧栏新增模块

**定时发布**：
* 发布方式单选：
  * 立即发布
  * 定时发布
* 选择定时发布后显示：
  * 日期时间选择器
  * 校验：时间必须晚于当前
* 提交后按钮文案变为"设置定时发布"

**所属系列**：
* 下拉选择已有系列
* 选项包含"无"
* 快捷新建系列按钮（打开新建弹窗）

#### 工具栏新增

**版本历史**按钮（仅编辑已有文章时显示）：
* 点击打开抽屉
* 版本列表：
  * 版本号
  * 保存时间
  * 内容摘要（前N字）
* 操作：
  * `预览`：只读查看该版本内容
  * `对比`：与当前版本对比差异
  * `回滚`：确认后恢复到该版本

**对比视图**：
* 左右分栏：历史版本 / 当前版本
* 差异高亮显示（类Git diff）

#### 状态栏

* 自动保存提示：
  * "草稿已自动保存 HH:mm:ss"
  * 保存中显示加载图标
* 恢复草稿提示（编辑器加载时）：
  * "发现未保存的草稿（HH:mm:ss），是否恢复？"
  * 按钮：`恢复` `忽略`

---

### 3.4 访问统计页（Admin）

#### 概览卡片区

* **今日PV** - 数字 + 环比昨日
* **今日UV** - 数字 + 环比昨日
* **本周访问** - 数字 + 环比上周
* **本月访问** - 数字 + 环比上月

#### 图表区

**访问趋势图**：
* 折线图
* 时间范围切换：近7日 / 近30日 / 近一年
* 双Y轴：PV / UV

**来源分布**：
* 饼图
* 分类：直接访问、搜索引擎、外链、其他

**热门页面排行**：
* 表格
* 列：路径、标题、访问量、平均停留时长
* 支持分页

**访客设备分布**：
* 饼图
* 分类：PC、移动、平板

#### 筛选

* 时间范围选择器
* 刷新按钮

---

### 3.5 热门排行配置页（Admin）

#### 算法权重配置

* 滑块/输入框形式：
  * 阅读量权重（W1）：0-10
  * 点赞权重（W2）：0-10
  * 评论权重（W3）：0-10
  * 收藏权重（W4）：0-10
  * 时间衰减系数：0-1

* 实时预览：根据当前权重显示前10名预览

#### 榜单配置

* 启用开关：日榜 / 周榜 / 月榜 / 总榜
* 每个榜单显示条数：下拉选择（10/20/50/100）

#### 操作

* 保存配置
* 重置为默认
* 手动刷新排行（强制重新计算）

---

### 3.6 SEO配置页（Admin）

#### Sitemap设置

* 启用开关
* 更新策略：
  * 自动更新（内容变更后）
  * 手动更新
* 更新频率提示：daily / weekly / monthly
* 操作按钮：
  * `立即刷新`
  * `预览 sitemap.xml`（新窗口打开）

#### Open Graph配置

* 默认分享图片（上传）
* 默认站点描述
* 启用Twitter Card开关

#### robots.txt配置

* 多行文本编辑器
* 预设模板按钮：
  * 允许所有
  * 禁止所有
  * 自定义

---

### 3.7 友链管理页（Admin）

#### 列表页

* 筛选：
  * 站点名称关键字
  * 分类筛选
  * 状态：启用/禁用/失效

* 表格列：
  * Logo（缩略图）
  * 站点名称
  * URL
  * 分类
  * 状态
  * 排序
  * 操作

* 批量操作：
  * 批量检测链接

#### 操作

* `编辑`
* `检测链接`：立即检查可访问性
* `启用/禁用`
* `删除`

#### 新建/编辑友链弹窗

* 表单字段：
  * 站点名称（必填）
  * URL（必填，校验http/https）
  * 描述
  * Logo：上传图片 或 输入URL
  * 分类：下拉选择，支持新建
  * 排序权重（数字）
  * 显示位置：复选框
    * 友链页面
    * 首页
    * 侧边栏

* 校验：
  * URL格式验证
  * 站点名称不能为空

#### 链接状态

* 正常：绿色标签
* 失效：红色标签 + 最后检测时间
* 未检测：灰色标签

---

## 4. 文章详情页扩展

### 4.1 互动区

文章标题下方/底部新增：

* **点赞按钮**：
  * 心形图标
  * 显示点赞数
  * 点击动画效果（心跳放大）
  * 已点赞状态：红色实心
  * 未登录点击：弹出登录提示

* **收藏按钮**：
  * 星形图标
  * 显示收藏数
  * 点击展开收藏夹选择下拉：
    * 已有收藏夹列表
    * "新建收藏夹"选项
  * 已收藏：黄色实心
  * 取消收藏：点击已收藏的收藏夹

* **分享按钮**：
  * 点击展开：
    * 复制链接
    * 分享到微博
    * 分享到Twitter

### 4.2 系列导航

若文章属于系列，在文章顶部显示：

* 系列信息条：
  * "[系列名称] 第N篇"
  * 点击系列名称进入系列详情页
* 底部导航：
  * 上一篇：标题（链接）
  * 下一篇：标题（链接）
  * 查看完整目录（链接）

---

## 5. 仪表盘（Dashboard）扩展

### 5.1 新增统计卡片

原有基础上新增：

* **今日访问** - PV/UV
* **点赞总数** - 全站点赞数
* **收藏总数** - 全站收藏数

### 5.2 新增图表

* **近7日访问趋势** - 迷你折线图
* **热门文章Top5** - 简洁列表

### 5.3 快捷入口

* 访问统计详情链接
* 热门排行配置链接

---

## 6. 用户主页扩展

### 6.1 页面结构

* 顶部：用户信息卡片
  * 头像、昵称、注册时间
* 内容区Tab：
  * `收藏`（默认显示公开收藏夹）

### 6.2 收藏Tab

* 公开收藏夹列表
* 点击收藏夹查看内容
* 用户未公开任何收藏夹："用户未公开收藏内容"

---

## 7. 页面状态

### 7.1 新增加载状态

* 访问统计图表：骨架屏 + 加载动画
* 热门排行列表：列表骨架屏
* 收藏夹切换：列表淡入效果

### 7.2 新增空态

* 收藏夹空态："还没有收藏任何文章，去发现好文章吧"
* 系列无文章："系列暂无文章"
* 热门排行空态："暂无排行数据"
* 友链空态："暂无友情链接"

---

## 8. 附录：V2.0页面清单

### 前台新增

| 页面 | 路径 | 权限 |
|------|------|------|
| 我的收藏 | /favorites | 登录用户 |
| 文章系列详情 | /series/:id | 按可见性 |
| 热门排行 | /ranking | 公开 |
| 友情链接 | /links | 公开 |
| 用户收藏展示 | /user/:id/favorites | 公开（仅公开收藏夹） |

### 后台新增

| 页面 | 路径 | 权限 |
|------|------|------|
| 系列管理 | /admin/series | Admin |
| 访问统计 | /admin/analytics | Admin |
| 热门排行配置 | /admin/ranking-config | Admin |
| SEO配置 | /admin/seo | Admin |
| 友链管理 | /admin/links | Admin |

### 编辑器扩展

| 功能 | 位置 | 说明 |
|------|------|------|
| 定时发布 | 侧栏 | 选择发布时间 |
| 所属系列 | 侧栏 | 选择/新建系列 |
| 版本历史 | 工具栏 | 查看/对比/回滚 |
| 自动保存 | 状态栏 | 自动保存提示 |
